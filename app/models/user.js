var mongoose = require('mongoose')
   ,Schema = mongoose.Schema
   , ObjectId = Schema.Types.ObjectId;

var userSchema = new Schema({
    email: { type: String, required: true, unique: true },
    username: { type: String, required: true, unique: true },
    // we can make password unique because its salted
    password: { type: String, required: true, unique: true },
    posts: [ {type: ObjectId, ref: 'Post'} ],
    fullname: { type: String, default: "" },
    bio: { type: String, default: "" },
    blurb: { type: String, default: "" },
    picture: { type: String, default: 'data:image/svg+xml;base64,PHN2ZyBkYXRhLXYtMTA4NGI2NTA9IiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMzAwIDMwMCI+PCEtLS0tPiA8IS0tLS0+IDxyZWN0IGRhdGEtdi0xMDg0YjY1MD0iIiBmaWxsPSIjRkZGRkZGIiB4PSIwIiB5PSIwIiB3aWR0aD0iMzAwcHgiIGhlaWdodD0iMzAwcHgiIGNsYXNzPSJsb2dvLWJhY2tncm91bmQtc3F1YXJlIj48L3JlY3Q+IDwhLS0tLT4gPGxpbmVhckdyYWRpZW50IGRhdGEtdi0xMDg0YjY1MD0iIiBncmFkaWVudFRyYW5zZm9ybT0icm90YXRlKDI1KSIgaWQ9IjkxZmFjOWVkLTA3ZGEtODIzZS03MTczLTY0ODkxNWExYWUwYyIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPjxzdG9wIGRhdGEtdi0xMDg0YjY1MD0iIiBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjogcmdiKDI1NCwgMTUsIDE1KTsgc3RvcC1vcGFjaXR5OiAxOyI+PC9zdG9wPiA8c3RvcCBkYXRhLXYtMTA4NGI2NTA9IiIgb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjogcmdiKDI1MSwgMTgyLCA4KTsgc3RvcC1vcGFjaXR5OiAxOyI+PC9zdG9wPjwvbGluZWFyR3JhZGllbnQ+IDxnIGRhdGEtdi0xMDg0YjY1MD0iIiBpZD0iODRlMjE0MzMtNjZhNC01MjFiLWI5NGQtYTExZjdhZGY5Y2ExIiBmaWxsPSJ1cmwoIzkxZmFjOWVkLTA3ZGEtODIzZS03MTczLTY0ODkxNWExYWUwYykiIHN0cm9rZT0ibm9uZSIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwtMTcuODUwMDI4OTkxNjk5MjIsLTUuNTY3MjYwNzQyMTg3NSkiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEwMCAxMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQoJLnN0MXtmaWxsOiNGRkZGRkY7fQoJLnN0MntmaWxsOm5vbmU7fQoJLnN0M3tmaWxsOm5vbmU7c3Ryb2tlOiMwMTAxMDE7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQoJLnN0NHtmaWxsOiMwMTAxMDE7fQoJLnN0NXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuNTtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLWRhc2hhcnJheTowLDM7fQoJLnN0NntmaWxsOm5vbmU7c3Ryb2tlOiNGRkZGRkY7c3Ryb2tlLXdpZHRoOjAuMjU7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQoJLnN0N3tmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQoJLnN0OHtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuMjtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9Cjwvc3R5bGU+PGc+PHBhdGggY2xhc3M9InN0MiIgZD0iTTUwLjksNDYuMmM3LjUsMCwxMy42LTYuMSwxMy42LTEzLjZTNTguNCwxOSw1MC45LDE5cy0xMy42LDYuMS0xMy42LDEzLjZTNDMuNCw0Ni4yLDUwLjksNDYuMnoiPjwvcGF0aD48cGF0aCBkPSJNNTAuOSw2MC4zQzUwLjksNjAuMyw1MC45LDYwLjMsNTAuOSw2MC4zQzUwLjksNjAuMyw1MC45LDYwLjMsNTAuOSw2MC4zQzUwLjksNjAuMyw1MC45LDYwLjMsNTAuOSw2MC4zICAgYzUuMywwLDcuNy00LjYsOC40LTcuN2wxMC44LDBsMS44LDcuMWwxLjgtMC41bC0yLjItOC40bC0xMy44LDBsLTAuMSwwLjhjMCwwLTAuMywxLjgtMS4yLDMuNWMtMS4zLDIuMi0zLjEsMy40LTUuNCwzLjQgICBjMCwwLDAsMCwwLDBoMGMwLDAsMCwwLDAsMGMtNS42LDAtNi42LTYuNi02LjctNi45bC0wLjEtMC44bC0xMy44LDBsLTYuOSwyN2wxLjgsMC40bDYuNS0yNS42bDEwLjgsMCAgIEM0My4yLDU1LjYsNDUuNiw2MC4zLDUwLjksNjAuM0M1MC45LDYwLjMsNTAuOSw2MC4zLDUwLjksNjAuM3oiPjwvcGF0aD48cGF0aCBkPSJNNTAuOSw0OC4yYzguNiwwLDE1LjYtNywxNS42LTE1LjZTNTkuNSwxNyw1MC45LDE3cy0xNS42LDctMTUuNiwxNS42UzQyLjMsNDguMiw1MC45LDQ4LjJ6IE01MC45LDE5ICAgYzcuNSwwLDEzLjYsNi4xLDEzLjYsMTMuNnMtNi4xLDEzLjYtMTMuNiwxMy42cy0xMy42LTYuMS0xMy42LTEzLjZTNDMuNCwxOSw1MC45LDE5eiI+PC9wYXRoPjxwb2x5Z29uIHBvaW50cz0iNzksNjUuNyA3Ny43LDY3IDg1LjcsNzUuMSA3Ny42LDg0IDc5LjEsODUuMyA4OC40LDc1ICAiPjwvcG9seWdvbj48cmVjdCB4PSI1Ny45IiB5PSI3NC41IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjM2MTQgLTAuOTMyNCAwLjkzMjQgMC4zNjE0IC0yNS45NTg3IDExMy4wODY1KSIgd2lkdGg9IjIzLjQiIGhlaWdodD0iMS45Ij48L3JlY3Q+PHBvbHlnb24gcG9pbnRzPSI2MC4xLDY1LjcgNTAuOCw3NiA2MC4xLDg1LjMgNjEuNSw4My45IDUzLjUsNzUuOSA2MS41LDY3ICAiPjwvcG9seWdvbj48L2c+PC9zdmc+PC9nPjwvc3ZnPg==' },
    workplaces: [ {type: ObjectId, ref: 'Workplace'} ],
    connections: [ {type: ObjectId, ref: 'User'} ]
});

module.exports = mongoose.model('User', userSchema);